var Be=Object.defineProperty;var Ve=(t,e,r)=>e in t?Be(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var F=(t,e,r)=>(Ve(t,typeof e!="symbol"?e+"":e,r),r),pe=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)};var C=(t,e,r)=>(pe(t,e,"read from private field"),r?r.call(t):e.get(t)),V=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},T=(t,e,r,n)=>(pe(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const _ of document.querySelectorAll('link[rel="modulepreload"]'))n(_);new MutationObserver(_=>{for(const o of _)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(_){const o={};return _.integrity&&(o.integrity=_.integrity),_.referrerPolicy&&(o.referrerPolicy=_.referrerPolicy),_.crossOrigin==="use-credentials"?o.credentials="include":_.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(_){if(_.ep)return;_.ep=!0;const o=r(_);fetch(_.href,o)}})();var Q,p,$e,L,de,He,re,x={},se=[],Ke=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,le=Array.isArray;function P(t,e){for(var r in e)t[r]=e[r];return t}function Te(t){var e=t.parentNode;e&&e.removeChild(t)}function ze(t,e,r){var n,_,o,s={};for(o in e)o=="key"?n=e[o]:o=="ref"?_=e[o]:s[o]=e[o];if(arguments.length>2&&(s.children=arguments.length>3?Q.call(arguments,2):r),typeof t=="function"&&t.defaultProps!=null)for(o in t.defaultProps)s[o]===void 0&&(s[o]=t.defaultProps[o]);return z(t,s,n,_,null)}function z(t,e,r,n,_){var o={type:t,props:e,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:_??++$e,__i:-1,__u:0};return _==null&&p.vnode!=null&&p.vnode(o),o}function Y(t){return t.children}function q(t,e){this.props=t,this.context=e}function I(t,e){if(e==null)return t.__?I(t.__,t.__i+1):null;for(var r;e<t.__k.length;e++)if((r=t.__k[e])!=null&&r.__e!=null)return r.__e;return typeof t.type=="function"?I(t):null}function qe(t,e,r){var n,_=t.__v,o=_.__e,s=t.__P;if(s)return(n=P({},_)).__v=_.__v+1,p.vnode&&p.vnode(n),ce(s,n,_,t.__n,s.ownerSVGElement!==void 0,32&_.__u?[o]:null,e,o??I(_),!!(32&_.__u),r),n.__v=_.__v,n.__.__k[n.__i]=n,n.__d=void 0,n.__e!=o&&Ee(n),n}function Ee(t){var e,r;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((r=t.__k[e])!=null&&r.__e!=null){t.__e=t.__c.base=r.__e;break}return Ee(t)}}function he(t){(!t.__d&&(t.__d=!0)&&L.push(t)&&!J.__r++||de!==p.debounceRendering)&&((de=p.debounceRendering)||He)(J)}function J(){var t,e,r,n=[],_=[];for(L.sort(re);t=L.shift();)t.__d&&(r=L.length,e=qe(t,n,_)||e,r===0||L.length>r?(ne(n,e,_),_.length=n.length=0,e=void 0,L.sort(re)):e&&p.__c&&p.__c(e,se));e&&ne(n,e,_),J.__r=0}function Ie(t,e,r,n,_,o,s,l,u,c,f){var i,h,a,g,w,b=n&&n.__k||se,v=e.length;for(r.__d=u,Re(r,e,b),u=r.__d,i=0;i<v;i++)(a=r.__k[i])!=null&&typeof a!="boolean"&&typeof a!="function"&&(h=a.__i===-1?x:b[a.__i]||x,a.__i=i,ce(t,a,h,_,o,s,l,u,c,f),g=a.__e,a.ref&&h.ref!=a.ref&&(h.ref&&ue(h.ref,null,a),f.push(a.ref,a.__c||g,a)),w==null&&g!=null&&(w=g),65536&a.__u||h.__k===a.__k?u=Ue(a,u,t):typeof a.type=="function"&&a.__d!==void 0?u=a.__d:g&&(u=g.nextSibling),a.__d=void 0,a.__u&=-196609);r.__d=u,r.__e=w}function Re(t,e,r){var n,_,o,s,l,u=e.length,c=r.length,f=c,i=0;for(t.__k=[],n=0;n<u;n++)(_=t.__k[n]=(_=e[n])==null||typeof _=="boolean"||typeof _=="function"?null:typeof _=="string"||typeof _=="number"||typeof _=="bigint"||_.constructor==String?z(null,_,null,null,_):le(_)?z(Y,{children:_},null,null,null):_.constructor===void 0&&_.__b>0?z(_.type,_.props,_.key,_.ref?_.ref:null,_.__v):_)!=null?(_.__=t,_.__b=t.__b+1,l=je(_,r,s=n+i,f),_.__i=l,o=null,l!==-1&&(f--,(o=r[l])&&(o.__u|=131072)),o==null||o.__v===null?(l==-1&&i--,typeof _.type!="function"&&(_.__u|=65536)):l!==s&&(l===s+1?i++:l>s?f>u-s?i+=l-s:i--:i=l<s&&l==s-1?l-s:0,l!==n+i&&(_.__u|=65536))):(o=r[n])&&o.key==null&&o.__e&&!(131072&o.__u)&&(o.__e==t.__d&&(t.__d=I(o)),_e(o,o,!1),r[n]=null,f--);if(f)for(n=0;n<c;n++)(o=r[n])!=null&&!(131072&o.__u)&&(o.__e==t.__d&&(t.__d=I(o)),_e(o,o))}function Ue(t,e,r){var n,_;if(typeof t.type=="function"){for(n=t.__k,_=0;n&&_<n.length;_++)n[_]&&(n[_].__=t,e=Ue(n[_],e,r));return e}t.__e!=e&&(r.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType===8);return e}function je(t,e,r,n){var _=t.key,o=t.type,s=r-1,l=r+1,u=e[r];if(u===null||u&&_==u.key&&o===u.type)return r;if(n>(u!=null&&!(131072&u.__u)?1:0))for(;s>=0||l<e.length;){if(s>=0){if((u=e[s])&&!(131072&u.__u)&&_==u.key&&o===u.type)return s;s--}if(l<e.length){if((u=e[l])&&!(131072&u.__u)&&_==u.key&&o===u.type)return l;l++}}return-1}function ve(t,e,r){e[0]==="-"?t.setProperty(e,r??""):t[e]=r==null?"":typeof r!="number"||Ke.test(e)?r:r+"px"}function K(t,e,r,n,_){var o;e:if(e==="style")if(typeof r=="string")t.style.cssText=r;else{if(typeof n=="string"&&(t.style.cssText=n=""),n)for(e in n)r&&e in r||ve(t.style,e,"");if(r)for(e in r)n&&r[e]===n[e]||ve(t.style,e,r[e])}else if(e[0]==="o"&&e[1]==="n")o=e!==(e=e.replace(/(PointerCapture)$|Capture$/i,"$1")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+o]=r,r?n?r.u=n.u:(r.u=Date.now(),t.addEventListener(e,o?me:ye,o)):t.removeEventListener(e,o?me:ye,o);else{if(_)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="width"&&e!=="height"&&e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e!=="rowSpan"&&e!=="colSpan"&&e!=="role"&&e in t)try{t[e]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&e[4]!=="-"?t.removeAttribute(e):t.setAttribute(e,r))}}function ye(t){if(this.l){var e=this.l[t.type+!1];if(t.t){if(t.t<=e.u)return}else t.t=Date.now();return e(p.event?p.event(t):t)}}function me(t){if(this.l)return this.l[t.type+!0](p.event?p.event(t):t)}function ce(t,e,r,n,_,o,s,l,u,c){var f,i,h,a,g,w,b,v,S,N,M,U,fe,W,X,k=e.type;if(e.constructor!==void 0)return null;128&r.__u&&(u=!!(32&r.__u),o=[l=e.__e=r.__e]),(f=p.__b)&&f(e);e:if(typeof k=="function")try{if(v=e.props,S=(f=k.contextType)&&n[f.__c],N=f?S?S.props.value:f.__:n,r.__c?b=(i=e.__c=r.__c).__=i.__E:("prototype"in k&&k.prototype.render?e.__c=i=new k(v,N):(e.__c=i=new q(v,N),i.constructor=k,i.render=Ge),S&&S.sub(i),i.props=v,i.state||(i.state={}),i.context=N,i.__n=n,h=i.__d=!0,i.__h=[],i._sb=[]),i.__s==null&&(i.__s=i.state),k.getDerivedStateFromProps!=null&&(i.__s==i.state&&(i.__s=P({},i.__s)),P(i.__s,k.getDerivedStateFromProps(v,i.__s))),a=i.props,g=i.state,i.__v=e,h)k.getDerivedStateFromProps==null&&i.componentWillMount!=null&&i.componentWillMount(),i.componentDidMount!=null&&i.__h.push(i.componentDidMount);else{if(k.getDerivedStateFromProps==null&&v!==a&&i.componentWillReceiveProps!=null&&i.componentWillReceiveProps(v,N),!i.__e&&(i.shouldComponentUpdate!=null&&i.shouldComponentUpdate(v,i.__s,N)===!1||e.__v===r.__v)){for(e.__v!==r.__v&&(i.props=v,i.state=i.__s,i.__d=!1),e.__e=r.__e,e.__k=r.__k,e.__k.forEach(function(B){B&&(B.__=e)}),M=0;M<i._sb.length;M++)i.__h.push(i._sb[M]);i._sb=[],i.__h.length&&s.push(i);break e}i.componentWillUpdate!=null&&i.componentWillUpdate(v,i.__s,N),i.componentDidUpdate!=null&&i.__h.push(function(){i.componentDidUpdate(a,g,w)})}if(i.context=N,i.props=v,i.__P=t,i.__e=!1,U=p.__r,fe=0,"prototype"in k&&k.prototype.render){for(i.state=i.__s,i.__d=!1,U&&U(e),f=i.render(i.props,i.state,i.context),W=0;W<i._sb.length;W++)i.__h.push(i._sb[W]);i._sb=[]}else do i.__d=!1,U&&U(e),f=i.render(i.props,i.state,i.context),i.state=i.__s;while(i.__d&&++fe<25);i.state=i.__s,i.getChildContext!=null&&(n=P(P({},n),i.getChildContext())),h||i.getSnapshotBeforeUpdate==null||(w=i.getSnapshotBeforeUpdate(a,g)),Ie(t,le(X=f!=null&&f.type===Y&&f.key==null?f.props.children:f)?X:[X],e,r,n,_,o,s,l,u,c),i.base=e.__e,e.__u&=-161,i.__h.length&&s.push(i),b&&(i.__E=i.__=null)}catch(B){e.__v=null,u||o!=null?(e.__e=l,e.__u|=u?160:32,o[o.indexOf(l)]=null):(e.__e=r.__e,e.__k=r.__k),p.__e(B,e,r)}else o==null&&e.__v===r.__v?(e.__k=r.__k,e.__e=r.__e):e.__e=Je(r.__e,e,r,n,_,o,s,u,c);(f=p.diffed)&&f(e)}function ne(t,e,r){for(var n=0;n<r.length;n++)ue(r[n],r[++n],r[++n]);p.__c&&p.__c(e,t),t.some(function(_){try{t=_.__h,_.__h=[],t.some(function(o){o.call(_)})}catch(o){p.__e(o,_.__v)}})}function Je(t,e,r,n,_,o,s,l,u){var c,f,i,h,a,g,w,b=r.props,v=e.props,S=e.type;if(S==="svg"&&(_=!0),o!=null){for(c=0;c<o.length;c++)if((a=o[c])&&"setAttribute"in a==!!S&&(S?a.localName===S:a.nodeType===3)){t=a,o[c]=null;break}}if(t==null){if(S===null)return document.createTextNode(v);t=_?document.createElementNS("http://www.w3.org/2000/svg",S):document.createElement(S,v.is&&v),o=null,l=!1}if(S===null)b===v||l&&t.data===v||(t.data=v);else{if(o=o&&Q.call(t.childNodes),b=r.props||x,!l&&o!=null)for(b={},c=0;c<t.attributes.length;c++)b[(a=t.attributes[c]).name]=a.value;for(c in b)a=b[c],c=="children"||(c=="dangerouslySetInnerHTML"?i=a:c==="key"||c in v||K(t,c,null,a,_));for(c in v)a=v[c],c=="children"?h=a:c=="dangerouslySetInnerHTML"?f=a:c=="value"?g=a:c=="checked"?w=a:c==="key"||l&&typeof a!="function"||b[c]===a||K(t,c,a,b[c],_);if(f)l||i&&(f.__html===i.__html||f.__html===t.innerHTML)||(t.innerHTML=f.__html),e.__k=[];else if(i&&(t.innerHTML=""),Ie(t,le(h)?h:[h],e,r,n,_&&S!=="foreignObject",o,s,o?o[0]:r.__k&&I(r,0),l,u),o!=null)for(c=o.length;c--;)o[c]!=null&&Te(o[c]);l||(c="value",g!==void 0&&(g!==t[c]||S==="progress"&&!g||S==="option"&&g!==b[c])&&K(t,c,g,b[c],!1),c="checked",w!==void 0&&w!==t[c]&&K(t,c,w,b[c],!1))}return t}function ue(t,e,r){try{typeof t=="function"?t(e):t.current=e}catch(n){p.__e(n,r)}}function _e(t,e,r){var n,_;if(p.unmount&&p.unmount(t),(n=t.ref)&&(n.current&&n.current!==t.__e||ue(n,null,e)),(n=t.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(o){p.__e(o,e)}n.base=n.__P=null,t.__c=void 0}if(n=t.__k)for(_=0;_<n.length;_++)n[_]&&_e(n[_],e,r||typeof t.type!="function");r||t.__e==null||Te(t.__e),t.__=t.__e=t.__d=void 0}function Ge(t,e,r){return this.constructor(t,r)}function Qe(t,e,r){var n,_,o,s;p.__&&p.__(t,e),_=(n=typeof r=="function")?null:r&&r.__k||e.__k,o=[],s=[],ce(e,t=(!n&&r||e).__k=ze(Y,null,[t]),_||x,x,e.ownerSVGElement!==void 0,!n&&r?[r]:_?null:e.firstChild?Q.call(e.childNodes):null,o,!n&&r?r:_?_.__e:e.firstChild,n,s),t.__d=void 0,ne(o,t,s)}Q=se.slice,p={__e:function(t,e,r,n){for(var _,o,s;e=e.__;)if((_=e.__c)&&!_.__)try{if((o=_.constructor)&&o.getDerivedStateFromError!=null&&(_.setState(o.getDerivedStateFromError(t)),s=_.__d),_.componentDidCatch!=null&&(_.componentDidCatch(t,n||{}),s=_.__d),s)return _.__E=_}catch(l){t=l}throw t}},$e=0,q.prototype.setState=function(t,e){var r;r=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=P({},this.state),typeof t=="function"&&(t=t(P({},r),this.props)),t&&P(r,t),t!=null&&this.__v&&(e&&this._sb.push(e),he(this))},q.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),he(this))},q.prototype.render=Y,L=[],He=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,re=function(t,e){return t.__v.__b-e.__v.__b},J.__r=0;var D,y,ee,ge,G=0,Fe=[],R=[],m=p,be=m.__b,Se=m.__r,ke=m.diffed,we=m.__c,Ne=m.unmount,Pe=m.__;function ae(t,e){m.__h&&m.__h(y,t,G||e),G=0;var r=y.__H||(y.__H={__:[],__h:[]});return t>=r.__.length&&r.__.push({__V:R}),r.__[t]}function Ae(t){return G=1,xe(Oe,t)}function xe(t,e,r){var n=ae(D++,2);if(n.t=t,!n.__c&&(n.__=[r?r(e):Oe(void 0,e),function(l){var u=n.__N?n.__N[0]:n.__[0],c=n.t(u,l);u!==c&&(n.__N=[c,n.__[1]],n.__c.setState({}))}],n.__c=y,!y.u)){var _=function(l,u,c){if(!n.__c.__H)return!0;var f=n.__c.__H.__.filter(function(h){return!!h.__c});if(f.every(function(h){return!h.__N}))return!o||o.call(this,l,u,c);var i=!1;return f.forEach(function(h){if(h.__N){var a=h.__[0];h.__=h.__N,h.__N=void 0,a!==h.__[0]&&(i=!0)}}),!(!i&&n.__c.props===l)&&(!o||o.call(this,l,u,c))};y.u=!0;var o=y.shouldComponentUpdate,s=y.componentWillUpdate;y.componentWillUpdate=function(l,u,c){if(this.__e){var f=o;o=void 0,_(l,u,c),o=f}s&&s.call(this,l,u,c)},y.shouldComponentUpdate=_}return n.__N||n.__}function Ye(t,e){var r=ae(D++,3);!m.__s&&De(r.__H,e)&&(r.__=t,r.i=e,y.__H.__h.push(r))}function Z(t){return G=5,Ze(function(){return{current:t}},[])}function Ze(t,e){var r=ae(D++,7);return De(r.__H,e)?(r.__V=t(),r.i=e,r.__h=t,r.__V):r.__}function Xe(){for(var t;t=Fe.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(j),t.__H.__h.forEach(oe),t.__H.__h=[]}catch(e){t.__H.__h=[],m.__e(e,t.__v)}}m.__b=function(t){y=null,be&&be(t)},m.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),Pe&&Pe(t,e)},m.__r=function(t){Se&&Se(t),D=0;var e=(y=t.__c).__H;e&&(ee===y?(e.__h=[],y.__h=[],e.__.forEach(function(r){r.__N&&(r.__=r.__N),r.__V=R,r.__N=r.i=void 0})):(e.__h.forEach(j),e.__h.forEach(oe),e.__h=[],D=0)),ee=y},m.diffed=function(t){ke&&ke(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(Fe.push(e)!==1&&ge===m.requestAnimationFrame||((ge=m.requestAnimationFrame)||et)(Xe)),e.__H.__.forEach(function(r){r.i&&(r.__H=r.i),r.__V!==R&&(r.__=r.__V),r.i=void 0,r.__V=R})),ee=y=null},m.__c=function(t,e){e.some(function(r){try{r.__h.forEach(j),r.__h=r.__h.filter(function(n){return!n.__||oe(n)})}catch(n){e.some(function(_){_.__h&&(_.__h=[])}),e=[],m.__e(n,r.__v)}}),we&&we(t,e)},m.unmount=function(t){Ne&&Ne(t);var e,r=t.__c;r&&r.__H&&(r.__H.__.forEach(function(n){try{j(n)}catch(_){e=_}}),r.__H=void 0,e&&m.__e(e,r.__v))};var Ce=typeof requestAnimationFrame=="function";function et(t){var e,r=function(){clearTimeout(n),Ce&&cancelAnimationFrame(e),setTimeout(t)},n=setTimeout(r,100);Ce&&(e=requestAnimationFrame(r))}function j(t){var e=y,r=t.__c;typeof r=="function"&&(t.__c=void 0,r()),y=e}function oe(t){var e=y;t.__c=t.__(),y=e}function De(t,e){return!t||t.length!==e.length||e.some(function(r,n){return r!==t[n]})}function Oe(t,e){return typeof e=="function"?e(t):e}function Le(t,e){let r=0,n=-1;for(let _=t.length-1;_>=0;_--)e(t[_])?(r++,n===-1&&(n=_)):n>=0&&(t.splice(_+1,n-_),n=-1);return n>=0&&t.splice(0,n+1),r}function tt(t){return t+1}function O(){return xe(tt,0)[1]}function rt(...t){let e;for(let r of t)r&&(e=e?e+" "+r:r);return e}function nt(t){const e=O(),r=Z();return r.current||(r.current=n=>{localStorage.setItem(t,n),e()}),[localStorage.getItem(t),r.current]}function _t(t){const e=O(),r=Z();r.current||(r.current=_=>{_===void 0?localStorage.removeItem(t):localStorage.setItem(t,JSON.stringify(_)),e()});let n=localStorage.getItem(t);return[n?JSON.parse(n):void 0,r.current]}function ot(t){const e=O(),r=Z();return r.current?Object.is(r.current.propValue,t)||(r.current.stateValue=r.current.propValue=t):r.current={propValue:t,stateValue:t,updater:n=>{r.current.stateValue=n,e()}},[r.current.stateValue,r.current.updater]}function it(t){let e="",r=new Uint8Array(t),n=r.byteLength;for(let _=0;_<n;_++)e+=String.fromCharCode(r[_]);return btoa(e)}function te(t){if(!t||t.byteLength===0)return"";let r=it(t).replaceAll("/","_").replaceAll("+","-");return r[r.length-2]==="="?r=r.substring(0,r.length-2):r[r.length-1]==="="&&(r=r.substring(0,r.length-1)),r}var st=0;function d(t,e,r,n,_,o){var s,l,u={};for(l in e)l=="ref"?s=e[l]:u[l]=e[l];var c={type:t,props:u,key:r,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--st,__i:-1,__u:0,__source:_,__self:o};if(typeof t=="function"&&(s=t.defaultProps))for(l in s)u[l]===void 0&&(u[l]=s[l]);return p.vnode&&p.vnode(c),c}function Me({icon:t,...e}){return d("span",{...e,class:"Icon"+(t?t.length>1?" material-icons-round":" fa":"")+(e.class?" "+e.class:""),children:t})}function lt({title:t,titleLpk:e,size:r,isDefault:n,class:_,children:o,...s}){return d("button",{...s,type:"button",class:"Button "+(r??"normal")+(n?" default":"")+(_?" "+_:""),children:o})}function ie({icon:t,class:e,title:r,titleLpk:n,..._}){return d(lt,{..._,class:rt(e,"icon-button"),children:d(Me,{icon:t})})}function We(t){return d(ie,{...t,size:"tiny"})}function ct({value:t,onChange:e,class:r,disabled:n,..._}){let[o,s]=ot(t);return d("label",{..._,class:"ToggleSwitch"+(r?" "+r:""),children:[d("input",{type:"checkbox",checked:o,disabled:n,onChange:l=>{s(l.currentTarget.checked),e==null||e(l.currentTarget.checked)}}),d("span",{class:"slider"})]})}class ut{constructor(){F(this,"listeners",[])}addListener(e,r=this){this.listeners.push({callback:e,owner:r})}removeListener(e){Le(this.listeners,r=>r.callback===e)}removeAllListener(e=this){Le(this.listeners,r=>r.owner===e)}dispatch(...e){for(let r of this.listeners.slice())r.callback.call(r.owner,...e)}}var $;class at extends ut{constructor(r){super();V(this,$,void 0);T(this,$,r)}get value(){return C(this,$)}set value(r){Object.is(C(this,$),r)||(T(this,$,r),this.dispatch(r))}}$=new WeakMap;function ft(t){var n;const e=O(),r=Z();return r.current||(r.current={effect:()=>()=>{var _;return(_=r.current.p)==null?void 0:_.removeListener(e)},empty:[]}),r.current.p!==t&&((n=r.current.p)==null||n.removeListener(e),t==null||t.addListener(e),r.current.p=t),Ye(r.current.effect,r.current.empty),t.value}var E,H;class pt{constructor(){V(this,E,void 0);V(this,H,void 0);F(this,"canInstall",new at(!1));F(this,"applicationServerKey","BFdZmt7SC_NIHaGgjqzzdd-Gn0ofMctrnz5zc8Ew3n7P-yyBoT-Ih_WUi4IL61l2gwnaNoSDf4LQ_17uvgmOBvs");F(this,"pushSubsciptionForServer");let e=localStorage.getItem("pushSubscription");this.pushSubsciptionForServer=e?JSON.parse(e):void 0,window.addEventListener("beforeinstallprompt",r=>{r.preventDefault(),T(this,E,r),this.canInstall.value=!0}),isSecureContext&&(async()=>{try{T(this,H,await navigator.serviceWorker.register("service-worker.js"))}catch{console.log("navigator.serviceWorker.register failed")}})()}get displayMode(){return document.referrer.startsWith("android-app://")?"twa":navigator.standalone||window.matchMedia("(display-mode: standalone)").matches?"standalone":"browser"}async install(){const{outcome:e,platform:r}=await C(this,E).prompt();return T(this,E,void 0),e==="accepted"}async subscribePushNotifications(){if(await Notification.requestPermission()!=="granted")return!1;let r=await C(this,H).pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:this.applicationServerKey});if(te(r.options.applicationServerKey)!==this.applicationServerKey){if(console.log("Application Server Key has changed. Re-subscribing."),!await r.unsubscribe())return!1;r=await C(this,H).pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:this.applicationServerKey})}return r?(localStorage.setItem("pushSubscription",JSON.stringify(this.pushSubsciptionForServer={endpoint:r.endpoint,auth:te(r.getKey("auth")),p256dh:te(r.getKey("p256dh"))})),!0):(localStorage.removeItem("pushSubscription"),!1)}async unsubscribePushNotifications(){let e=await C(this,H).pushManager.getSubscription();e&&await e.unsubscribe(),this.pushSubsciptionForServer=void 0,localStorage.removeItem("pushSubscription")}}E=new WeakMap,H=new WeakMap;const A=new pt;function dt({address:t,onDelete:e}){let r=t;return A.pushSubsciptionForServer&&(r+="?"+new URLSearchParams([["endpoint",A.pushSubsciptionForServer.endpoint],["auth",A.pushSubsciptionForServer.auth],["p256dh",A.pushSubsciptionForServer.p256dh]]).toString()),d("div",{class:"ServerCard",children:[d(Me,{icon:""}),d("a",{href:r,children:t}),d(We,{icon:"",onClick:e})]})}function ht(){let[t,e]=Ae(!1),[r,n]=Ae(""),[_,o]=_t("servers"),[s,l]=nt("enablePush");const u=O();let c=ft(A.canInstall);return d("main",{class:"App",children:[d("header",{children:[d("div",{class:"title",children:[d("h1",{children:"webSCADA Launcher"}),c&&d(ie,{size:"small",icon:"",onClick:async()=>{await A.install(),u()}}),d(ie,{size:"small",icon:t?"":"+",onClick:()=>e(!t)})]}),t&&d("div",{class:"AddSystem",children:[d("input",{placeholder:"HTTP address like https://demo.webscada.hu/",value:r,onInput:f=>n(f.currentTarget.value)}),d(We,{icon:"+",onClick:()=>{o(_?[..._,{address:r}]:[{address:r}]),e(!1),n("")}})]}),d("div",{class:"enable-notification",children:[d(ct,{value:!!s,onChange:async f=>{l(f?"enabled":""),f?await A.subscribePushNotifications()?(new Notification("webSCADA Launcher Test Notification",{body:"You successfully enabled notifications for this app and are able to receive alert notifications from webSCADA systems."}),u()):(l(""),alert("Notifications are denied")):(await A.unsubscribePushNotifications(),u())}}),d("span",{children:"Enable push notifications"})]})]}),d("div",{class:"content",children:_==null?void 0:_.map(f=>d(dt,{address:f.address,onDelete:()=>o(_.filter(i=>f!==i))},f.address))}),d("footer",{})]})}Qe(d(ht,{}),document.body);
